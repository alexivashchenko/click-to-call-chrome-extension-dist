let Helpers={dev:!0,log:function(...arguments){if(0==Helpers.dev)return!1;arguments.length>0&&arguments.forEach(e=>{console.log(e)})},maybeReloadPage:function(){return alert('Please check "VoiceMPower" settings and reload the page.'),!0},runBackgroundCommand:function(e,r){Helpers.log("runBackgroundCommand start: "+e,r);let n="__rw_chrome_ext_reply_"+(new Date).getTime();try{if(void 0===chrome.runtime)return Helpers.maybeReloadPage(),!1;chrome.runtime.sendMessage({type:e,data:r},(function(r){void 0!==chrome.runtime.lastError&&(void 0!==chrome.runtime.lastError.message?Helpers.log("chrome.runtime.lastError.message for: "+e,r,chrome.runtime.lastError.message):Helpers.log("chrome.runtime.lastError.message for: "+e,r,chrome.runtime.lastError)),document.createEvent("Events").initEvent(n,!1,!1),Helpers.log("runBackgroundCommand end: "+e,r)}))}catch(e){console.log("Error",e),Helpers.maybeReloadPage()}}};function inIframe(){try{return window.self!==window.top}catch(e){return!0}}if(inIframe())console.log("Extension loaded inside iframe. Abort.");else{let e={phoneClickEventListener:function(e){e.preventDefault();let r=e.currentTarget.href.replace("callto:","");r=r.replace("tel:",""),Helpers.runBackgroundCommand("dialPhone",r)},addPhoneLinks:function(r){r.forEach(r=>{r.removeEventListener("click",e.phoneClickEventListener),r.addEventListener("click",e.phoneClickEventListener)})},init:function(){let r=!1;setInterval((function(){let n=document.querySelectorAll('a.click-to-call[href*="callto"], a.click-to-call[href*="tel"]');n.length>0?(0==r&&Helpers.log("Phone links founded: "+n.length),e.addPhoneLinks(n),r=!0):!1===r&&Helpers.log("Phone links not found...")}),2e3)}};window.addEventListener("load",(function(){e.init()}),!1)}