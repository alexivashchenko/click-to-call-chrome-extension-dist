function inIframe(){try{return window.self!==window.top}catch(e){return!0}}if(inIframe())console.log("Extension loaded inside iframe. Abort.");else{let e={dev:!0,log:function(...arguments){if(0==e.dev)return!1;arguments.length>0&&arguments.forEach(e=>{console.log(e)})}},n={phoneClickEventListener:function(e){e.preventDefault();let n=e.currentTarget.href.replace("callto:","");n=n.replace("tel:",""),runBackgroundCommand("dialPhone",n)},addPhoneLinks:function(e){e.forEach(e=>{e.removeEventListener("click",n.phoneClickEventListener),e.addEventListener("click",n.phoneClickEventListener)})},init:function(){let r=!1;setInterval((function(){let o=document.querySelectorAll('a.click-to-call[href*="callto"], a.click-to-call[href*="tel"]');o.length>0?(0==r&&e.log("Phone links founded: "+o.length),n.addPhoneLinks(o),r=!0):!1===r&&e.log("Phone links not found...")}),2e3)}};function maybeReloadPage(){return alert('Please check "VoiceMPower" settings and reload the page.'),!0}function runBackgroundCommand(n,r){e.log("runBackgroundCommand start: "+n,r);let o="__rw_chrome_ext_reply_"+(new Date).getTime();try{if(void 0===chrome.runtime)return maybeReloadPage(),!1;chrome.runtime.sendMessage({type:n,data:r},(function(r){void 0!==chrome.runtime.lastError&&(void 0!==chrome.runtime.lastError.message?e.log("chrome.runtime.lastError.message for: "+n,r,chrome.runtime.lastError.message):e.log("chrome.runtime.lastError.message for: "+n,r,chrome.runtime.lastError)),document.createEvent("Events").initEvent(o,!1,!1),e.log("runBackgroundCommand end: "+n,r)}))}catch(e){console.log("Error",e),maybeReloadPage()}}window.addEventListener("load",(function(){n.init()}),!1)}