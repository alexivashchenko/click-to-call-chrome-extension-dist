function initReloadPageButtons(){let e=document.querySelectorAll(".reloadPage");e.length>0&&e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),chrome.tabs.getSelected(null,(function(e){chrome.tabs.executeScript(e.id,{code:"window.location.reload();"})})),location.reload(),window.close()})})}window.addEventListener("load",()=>{let e=document.querySelector("#settings");null!==e&&(chrome.storage.local.get("settings",t=>{if(void 0!==t.settings&&(t=t.settings),void 0!==t)for(const o in t){let n=e.querySelector('input[name="'+o+'"]:not([type="hidden"])');"text"!=n.type&&"password"!=n.type||(n.value=t[o]),"checkbox"==n.type&&("true"==t[o]?n.checked=!0:n.checked=!1)}}),e.addEventListener("submit",t=>{t.preventDefault();let o=new FormData(e),n={};for(let e of o.entries())n[e[0]]=e[1];chrome.storage.local.set({settings:n},()=>{document.querySelector("#settings").remove();let e=document.querySelector("#messages");e.classList.add("active"),e.classList.add("success"),e.innerHTML='<h3>Settings saved.</h3><p>Page reload required.</p><button class="reloadPage">Reload Page</button>',initReloadPageButtons()})}))},!1);