let Helpers={dev:!0,log:function(...arguments){if(0==Helpers.dev)return!1;arguments.length>0&&arguments.forEach(e=>{console.log(e)})},maybeReloadPage:function(){return alert('Please check "VoiceMPower" settings and reload the page.'),!0},runBackgroundCommand:function(e,t){Helpers.log("runBackgroundCommand start: "+e,t);let r="__rw_chrome_ext_reply_"+(new Date).getTime();try{if(void 0===chrome.runtime)return Helpers.maybeReloadPage(),!1;chrome.runtime.sendMessage({type:e,data:t},(function(t){void 0!==chrome.runtime.lastError&&(void 0!==chrome.runtime.lastError.message?Helpers.log("chrome.runtime.lastError.message for: "+e,t,chrome.runtime.lastError.message):Helpers.log("chrome.runtime.lastError.message for: "+e,t,chrome.runtime.lastError)),document.createEvent("Events").initEvent(r,!1,!1),Helpers.log("runBackgroundCommand end: "+e,t)}))}catch(e){console.log("Error",e),Helpers.maybeReloadPage()}}};function initReloadPageButtons(){let e=document.querySelectorAll(".reloadPage");e.length>0&&e.forEach(e=>{e.addEventListener("click",e=>{e.preventDefault(),chrome.tabs.getSelected(null,(function(e){chrome.tabs.executeScript(e.id,{code:"window.location.reload();"})})),location.reload(),window.close()})})}window.addEventListener("load",()=>{let e=document.querySelector("#settings");null!==e&&(chrome.storage.local.get("settings",t=>{if(void 0!==t.settings&&(t=t.settings),void 0!==t)for(const r in t){let o=e.querySelector('input[name="'+r+'"]:not([type="hidden"])');"text"!=o.type&&"password"!=o.type||(o.value=t[r]),"checkbox"==o.type&&("true"==t[r]?o.checked=!0:o.checked=!1)}}),e.addEventListener("submit",t=>{t.preventDefault();let r=new FormData(e),o={};for(let e of r.entries())o[e[0]]=e[1];chrome.storage.local.set({settings:o},()=>{document.querySelector("#settings").remove();let e=document.querySelector("#messages");e.classList.add("active"),e.classList.add("success"),e.innerHTML='<h3>Settings saved.</h3><p>Page reload required.</p><button class="reloadPage">Reload Page</button>',Helpers.runBackgroundCommand("init"),initReloadPageButtons()})}))},!1);